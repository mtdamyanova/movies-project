<div class="container">
  <form [formGroup]="addMovieForm" (ngSubmit)="onSubmit()">
    <div class="mb-3">
      <label for="title" class="form-label">Title</label>
      <input
        type="text"
        class="form-control"
        id="title"
        formControlName="title"
        placeholder="Enter Title"
        [attr.disabled]="editMode ? 'disabled' : null"
      />
    </div>
    <div class="mb-3">
      <label for="director" class="form-label">Director</label>
      <input
        type="text"
        class="form-control"
        id="director"
        formControlName="director"
        placeholder="Enter Director"
      />
    </div>
    <div class="mb-3">
      <label for="year" class="form-label">Year</label>
      <input
        type="text"
        class="form-control"
        id="year"
        formControlName="year"
        placeholder="MM-DD-YYYY"
      />
    </div>
    <div class="mb-1">
      <label for="imageUpload" class="form-label">Image Upload</label>
      <input
        class="form-control form-control-sm"
        type="file"
        (change)="onFileSelected($event)"
        id="imageUpload"
        #uploader
      />
      <div [ngStyle]="{ color: 'red' }">{{ errorMessage }}</div>
      <button
        type="button"
        [ngClass]="'col-12 mt-2 mb-2 btn btn-sm btn-outline-light'"
        (click)="uploadImage()"
        [disabled]="!uploader.value || errorMessage"
      >
        Upload!
      </button>
      <div class="progress">
        <div
          [ngStyle]="{ width: percent + '%' }"
          class="progress-bar"
          aria-valuenow="0"
          aria-valuemin="0"
          aria-valuemax="100"
        ></div>
      </div>
    </div>
    <div class="col-12 text-center spanFull">OR</div>
    <div class="mb-3">
      <label for="img">Image URL</label>
      <input
        type="text"
        id="img"
        formControlName="img"
        class="form-control"
        placeholder="Link to image"
        #imagePath
      />
    </div>
    <div class="mb-3">
      <img [src]="imagePath.value" class="img-responsive" />
    </div>

    <div class="mb-3">
      <label for="description">Description</label>
      <textarea
        type="text"
        id="description"
        formControlName="description"
        class="form-control"
        rows="6"
      ></textarea>
    </div>
    <button type="submit" class="btn btn-dark" [disabled]="!addMovieForm.valid">
      {{ editMode ? "Edit" : "Add" }}
    </button>
    |
    <button type="button" class="btn btn-dark" (click)="onCancel()">
      Cancel
    </button>
  </form>
</div>
